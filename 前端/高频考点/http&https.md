# 三次握手和四次挥手
三次握手:  
1,客户端发送SYN码，请求和服务端建立连接(服务端，你有空吗？我想和你建立连接)  
2,服务端接收到SYN码，回给客户端SYN+ACK码(有空，可以建立连接)  
3,客户端收到ACK码，验证这个ACK码是否正确，正确就建立起数据连接(好的，确认无误，开始建立连接)  
四次挥手:  
1,客户端无数据传输了，就会发送FIN码告诉服务器(我发送完了)  
2,服务端接收完毕，发送ACK码给客户端(客户端可以把数据通道关闭了)  
3,服务端响应，发送数据，发送完毕，它也会发送FIN码告诉客户端  
4,客户端接收完毕，发送ACK码通知服务器可以关闭通道  
注:服务器一般是不会主动发送消息给客户端的，通常情况下都是客户端先请求--服务端再响应的机制，当然有几种技术可以实现服务器实时主动推送消息:1.反向ajax 2.comet 3.**websocket协议**  
# http的缺点
1，使用明文通信，会被窃听:  
http本身不具有加密的功能，所以使用http协议通信的请求和响应的内容也就无法加密  
2，不验证通信方的身份，有可能遭遇伪装:  
任何人都可以发送请求，服务端只要接收到请求，无论对方是谁，都会返回一个响应(客户端ip和端口没有被限制的情况下)  
3，无法证明报文完整性，可能已遭篡改  
# http2相较http1的优点
1，多路复用:一个TCP连接可以一次性发送和接收多个请求  
2，二进制分帧:消息可再分为更小的二进制编码的帧  
3，首部压缩:新的压缩算法，减少了首部大小  
4，服务推送:服务端把客户端需要请求的其它资源一次性主动发送给它 
# http1.1相较http1.0
* 缓存处理， 加入了ETag、If-Match, If-None-Match
* 请求头引入了range头域，它允许只请求资源的某个部分，即返回码是206（Partial Content）
* 在HTTP1.1中新增了24个错误状态响应码
* 在HTTP1.1中默认开启Connection： keep-alive，一定程度上弥补了HTTP1.0每次请求都要创建连接的缺点
# https的优缺点
https = http +SSL/TLS  
https在HTTP层和TCP层之间加了一个安全套接层，用于加密和身份验证(注:SSL标准化后改名为TLS)  
优点:  
1,https可以认证用户和服务器，确保数据没有发送给错的对象  
2,加密传输，更安全，防止数据中途被篡改  
缺点:  
1,页面加载时间会被延长，会影响缓存，增加数据开销和功耗  
2,https协议的安全也是有范围的，对于黑客攻击、拒绝服务攻击和服务器劫持等方面几乎不起作用  
3,ssl证书的信用链体系不安全，某些国家可以控制CA根证书，中间人攻击一样可以  
4，要频繁的加密解密，计算资源消耗变大  
## https的具体工作流程
 非对称加密算法：RSA，DSA/DSS   
 对称加密算法：AES，RC4，3DES   
 HASH算法：MD5，SHA1，SHA256  
首先，要使用https协议就得从CA申请证书，免费的很少，要交钱。server端有了CA证书，就可以证明它是可以信任.    
服务器用RSA生成公钥和私钥，公钥会放在证书里，发送给客户端，私钥自己保留  
1.客户端发送请求，从服务端那里获取传送证书,客户端TLS验证证书是否有效，有效，就产生一个随机值，然后用证书里的公钥加密。  
2.客户端向服务端发送加密后的随机值，让服务端得到这个随机值，以后双方通信接通过这个随机值来加密和解密  
3.服务端用私钥解密后,得到随机值(通信的密钥)，发送的内容都会用该值进行**对称**加密,因为客户端和服务端都知道这个密钥是什么，所以都可以对发送内容解密 
## https用哪些端口进行通信，这些端口分别有什么用
* 443端口用来验证服务器端和客户端的身份，比如验证证书的合法性
* 80端口用来传输数据（在验证身份合法的情况下，用来数据传输）






